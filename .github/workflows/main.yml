name: CI

on:
    push:
        branches:
            - main

jobs:
    build-and-push:
        name: 'Build and Push'
        runs-on: ubuntu-latest

        steps:
            - name: Checkout 
              uses: actions/checkout@v4
            
            - name: Generate SHA
              id: generate_shar
              run: |
                SHA=$(echo $GITHUB_SHA | head -c7)
                echo "sha=$SHA" >> $GITHUB_OUTPUT

            - name: Build docker image
              run: docker build -t nlw-journey-devops:${{ steps.generate_shar.outputs.sha }} .
